# 8. Антипаттерны и частые ошибки

Этот раздел помогает распознавать типичные ошибки при работе с Cursor AI и предотвращать их заранее.  
Каждая ошибка включает:

- **Как выглядит**  
- **Почему возникает**  
- **К чему приводит**  
- **Как избежать**

---

## ❌ 8.1. Слишком общие запросы

### Как выглядит
- «Сделай модуль лифта»  
- «Напиши архитектуру»  
- «Сделай физику полёта»

### Почему возникает
Пытаешься быстро получить результат, не задавая рамок.

### К чему приводит
- Cursor придумывает архитектуру  
- Добавляет классы, абстракции, зависимости  
- Ломает стиль проекта  

### Как избежать
Использовать формулу:  
**Контекст → Ограничения → Задача → Формат ответа**

Пример:
```
Context: telnik-flight-engine, TS-only, pure functions.
Constraints: no classes, no new abstractions.
Task: propose 3 variants of the lift module.
Output: variants + comparison + recommendation.
```

---

## ❌ 8.2. Перегрузка контекстом

### Как выглядит
- 20 абзацев описания проекта  
- 50 требований в одном промпте  
- длинные истории перед задачей

### Почему возникает
Хочется дать максимум информации.

### К чему приводит
- Cursor игнорирует часть требований  
- теряет фокус  
- выдаёт непредсказуемый результат

### Как избежать
Использовать правило:  
**3–7 строк контекста, 3–5 ограничений, 1 задача**

---

## ❌ 8.3. Попытка сделать всё сразу

### Как выглядит
«Сделай архитектуру, API, код, тесты и документацию».

### Почему возникает
Хочется ускорить процесс.

### К чему приводит
- смешивание уровней абстракции  
- ошибки в API  
- несогласованность модулей  
- мусор в коде

### Как избежать
Работать итеративно:

1. Архитектура  
2. API  
3. Реализация  
4. Тесты  
5. Документация  

---

## ❌ 8.4. Отсутствие запретов

### Как выглядит
«Сделай модуль», без ограничений.

### Почему возникает
Кажется, что Cursor "и так поймёт".

### К чему приводит
- появляются классы  
- скрытое состояние  
- новые типы  
- внешние зависимости  
- нарушение стиля проекта

### Как избежать
Всегда указывать запреты:

- no classes  
- no new abstractions  
- no hidden state  
- no external deps  
- do not change API  

---

## ❌ 8.5. Длинные цепочки правок

### Как выглядит
«Исправь это, и ещё это, и ещё вот это…»

### Почему возникает
Хочется "дожать" задачу в одном промпте.

### К чему приводит
- Cursor теряет контекст  
- меняет лишнее  
- ломает соседние модули

### Как избежать
**Одна правка → один шаг**

---

## ❌ 8.6. Нет плана перед изменениями

### Как выглядит
«Переименуй функцию во всём проекте».

### Почему возникает
Кажется, что задача простая.

### К чему приводит
- Cursor меняет не те файлы  
- ломает импорты  
- меняет архитектуру

### Как избежать
Всегда:

```
First, show the plan and list of files.
Wait for confirmation.
```

---

## ❌ 8.7. Неограниченная область изменений

### Как выглядит
«Исправь этот модуль», без уточнения.

### Почему возникает
Кажется, что Cursor поймёт контекст.

### К чему приводит
- изменения в других файлах  
- каскадные правки  
- неожиданные rename  
- изменение API

### Как избежать
Указывать область:

```
Modify only this file.
Do not touch other modules.
```

---

## ❌ 8.8. Просьбы объяснить код без кода

### Как выглядит
«Объясни, что делает этот модуль», без вставки кода.

### Почему возникает
Кажется, что Cursor "помнит".

### К чему приводит
- Cursor начинает фантазировать  
- объясняет несуществующие вещи  
- вводит в заблуждение

### Как избежать
Всегда вставлять код, который нужно анализировать.

---

## ❌ 8.9. Слишком много задач в одном промпте

### Как выглядит
«Сделай архитектуру, оптимизацию, тесты и документацию».

### Почему возникает
Хочется получить "всё и сразу".

### К чему приводит
- хаотичный результат  
- потеря структуры  
- ошибки в API  
- несогласованность

### Как избежать
**Одна задача → один промпт**

---

## ❌ 8.10. Свобода действий там, где нужна строгость

### Как выглядит
«Сделай как считаешь нужным».

### Почему возникает
Хочется посмотреть, что предложит Cursor.

### К чему приводит
- магия  
- новые абстракции  
- переписанная архитектура  
- неожиданные решения

### Как избежать
Задавать рамки:

- стиль  
- архитектуру  
- ограничения  
- формат ответа  

---

## ❌ 8.11. Использование Cursor без индексации проекта

### Как выглядит
Cursor "не видит" типы, функции, структуру.

### Почему возникает
Индексация выключена или проект слишком большой.

### К чему приводит
- неправильные импорты  
- неверные типы  
- дублирование функций  
- ошибки в интеграции

### Как избежать
Проверить:  
**Settings → Codebase → Indexing: ON**

---

## ❌ 8.12. Доверие к ответу без проверки

### Как выглядит
«Ну Cursor же написал правильно».

### Почему возникает
Cursor звучит уверенно.

### К чему приводит
- скрытые ошибки  
- неверные формулы  
- неправильные edge cases  
- нарушение архитектуры

### Как избежать
Просить Cursor проверять себя:

```
Check for:
- architectural inconsistencies
- hidden state
- nondeterminism
- naming issues
```

---

Навигация: [← Предыдущий](07-workflows.md) | [Оглавление](index.md) | [Следующий →](09-examples.md)